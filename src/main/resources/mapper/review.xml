<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.teamprojectbringiton.review.ReviewRepository">

    <insert id="insert">
        insert into review_tb(rating, comment, space_id, user_id, created_at)
        values (#{rating}, #{comment}, #{spaceId}, #{userId}, now());
    </insert>

    <select id="getCommentCount" resultType="int">
        select count(comment) , space_id from review_tb where space_id = #{spaceId};
    </select>


    <select id="ratingAvg" resultType="double">
        select ifnull(avg(rating),0.0) rating_avg
    FROM review_tb
    WHERE space_id = #{spaceId};
    </select>

</mapper>